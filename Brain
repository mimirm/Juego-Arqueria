public class Brain {
    Interfaz interfaz;
    private int cantSets, cantTiros, partidasJugadas;
    Partida partida;

    public Brain(int args_count){                //Metodo constructor
        interfaz = new Interfaz(args_count);
        cantSets = 2;
        cantTiros = 3;
        partidasJugadas = 0;

    }

    public int escogerOpcion(){
        int opcion = 14;
        boolean Seguir = true;
        while (Seguir){
           String entrada = interfaz.askInfo("\nMenu: \n1. Jugar \n2. Configurar cantidad de sets \n3. Configurar cantidad de tiros por set \n4. Ver Puntuacion mas alta \n5. SALIR");
           try {
              opcion = Integer.parseInt( entrada );  
           }
           catch(Exception e){
              opcion = -14;
           }
            Seguir = !(1<= opcion && opcion <= 5);
        }   
        interfaz.setOpcion(opcion);
        return opcion;
    }
    
     public void decidirOpcion( int opcion ){
        switch (opcion){
            case 1:
                partidasJugadas++;   
                iniciarPartida();
            break;
            case 2:
                verPuntajeMasAlto();
            break;
            case 3:
                configurarCantDeSets();
            break;
            case 4:
                configurarCantDeTirosPorSets();
            break;
        }
    }
    
    public void run(){
        int opcion;
        do{
            opcion = escogerOpcion();
            decidirOpcion( opcion );
        }while( opcion != 5);

        salir();
    }

    public void iniciarPartida(){
        partida = new Partida();
        partida.iniciarPartida(cantSets, cantTiros);
    }
    
    public void salir(){
        interfaz.displayMessage("Adios Arquero!");
    }
    
    public void verPuntajeMasAlto(){
        if(partidasJugadas == 0){
            interfaz.displayMessage("No han habido partidas");
        }
        else{
            String mensaje = partida.darPuntajeMasAlto();
            interfaz.displayMessage(mensaje);
        }
    }

    public void configurarCantDeSets(){
        String entrada = interfaz.askInfo("Digite la cantidad de sets para el juego: ");
        try {
            cantSets = Integer.parseInt(entrada);
        }
        catch(Exception e){
            interfaz.displayMessage("Se configuraron 2 sets por default al notar que no se ingreso un numero entero.");
            cantSets = 2;
        }
    }

    public void configurarCantDeTirosPorSets(){
        String entrada = interfaz.askInfo("Digite la cantidad de tiros para el juego");
        try {
            cantTiros = Integer.parseInt(entrada);
        }
        catch(Exception e){
            interfaz.displayMessage("Se configuraron 3 tiros por default al notar que no se ingreso un numero entero.");
            cantTiros = 3;
        }

     }
     

}
