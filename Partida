public class Partida
{

    private Jugador jugadorhumano;
    private Jugador jugadorIA;
    private Vientos viento;
    private Juez juez;
    private Interfaz interfaz;
    int contadorsets = 0;
    int contadortiros = 0;
    String mensaje = "";
    public Partida(int usarGrafica){
        juez = new Juez();
        jugadorhumano = new Jugador(4,usarGrafica );
        jugadorIA = new Jugador(decidirEstrategia(), usarGrafica);
        viento = new Vientos();
        interfaz = new Interfaz(usarGrafica);
    }

    public void iniciarPartida(int sets, int tiros){
        int primerjugador = decidirPrimerJugador();
        System.out.println ();
        

        for (int setActual = 1; setActual <= sets; i++){
            viento.setDireccionViento(((Math.random()*2)+1)*Math.PI); 
            viento.setTipoViento((int) (Math.random()*3)+1);
            if (contadorsets > 0){
                interfaz.displayMessage("Fin del set: "+ toStringSet());
            }
            contadorsets = setActual;
            for (int tiroActual = 1; tiroActual <= tiros; o++){
               //Si el usuario va primero:
               if (primerjugador == 1){
                    //Turno del usuario
                    jugadorhumano.lanzarFlecha( setActual, tiroActual, viento.getX2(), viento.getY2());
                    viento.desviarFlecha(jugadorhumano.getTirox(),jugadorhumano.getTiroy());
                    juez.setX2Humano(viento.getX2());
                    juez.setY2Humano(viento.getY2());
                    juez.sumarPuntosHumanos();
                    //Turno del IA
                    jugadorIA.lanzarFlecha( setActual, tiroActual, viento.getX2(), viento.getY2());
                    viento.desviarFlecha( jugadorIA.getTiroX(), jugadorIA.getTiroY());
                    juez.setX2IA( viento.getX2());
                    juez.setY2IA( viento.getY2());
                    juez.sumarPuntosIA();
                    contadortiros = tiroActual;
                    mensaje = juez.devolverInformacion() + "Set: " + toStringSet() + "Tiro: " + toStringTiro();
                    interfaz.displayMessage(mensaje);
                }
                //Si la maquina va primero:
                else {
                    //Turno de IA
                    jugadorIA.lanzarFlecha( setActual, tiroActual, viento.getX2(), viento.getY2());
                    viento.desviarFlecha( jugadorIA.getTiroX(),jugadorIA.getTiroY());
                    juez.setX2IA(viento.getX2());
                    juez.setY2IA(viento.getY2());
                    juez.sumarPuntosIA();
                    
                    //Turno del usuario
                    jugadorhumano.lanzarFlecha( setActual, tiroActual, viento.getX2(), viento.getY2());
                    viento.desviarFlecha( jugadorhumano.getTiroX(), jugadorhumano.getTiroY());
                    juez.setX2Humano(viento.getX2());
                    juez.setY2Humano(viento.getY2());
                    juez.sumarPuntosHumanos();
                    contadortiros = tiroActual;
                    mensaje = juez.devolverInformacion() + "Set: " + toStringSet() + "Tiro: " + toStringTiro();
                    interfaz.displayMessage(mensaje);
                }
            }
        }
        
        interfaz.displayMessage(juez.decidirGanador());
        juez.setJugadorMasAlto(interfaz.askInfo("Digite su nombre: ") );
    }

    public String darPuntajeMasAlto(){
        String mensaje = "";
        mensaje = juez.darPuntajeMasAlto();
        return mensaje ;

    }
    public int getSet(){    
        return contadorsets;

    }

    public int getTiro(){
        return contadortiros;

    }

    public String toStringTiro(){
        String tiros = ""+contadortiros;
        return tiros;

    }

    public String toStringSet(){
        String sets = ""+contadorsets;
        return sets;

    }

    public int decidirEstrategia(){
        int strat = 0;
        strat = (int)(Math.random()*3)+1;
        return strat;

    }

    public int decidirPrimerJugador(){
        int primerJugador = (int)(Math.random()*3);
        return primerJugador;
    }

}
