public class Partida
{

    private Jugador jugadorhumano;
    private Jugador jugadorIA;
    private Vientos viento;
    private Juez juez;
    private Interfaz interfaz;
    int contadorsets = 0;
    int contadortiros = 0;
    String mensaje = "";
    public Partida(int usarGrafica){
        juez = new Juez();
        jugadorhumano = new Jugador(4);
        jugadorIA = new Jugador(decidirEstrategia());
        viento = new Vientos();
        interfaz = new Interfaz(usarGrafica);
    }

    public void iniciarPartida(int sets, int tiros){
        int primerjugador = decidirPrimerJugador();
        int strat = decidirEstrategia();

        for (int i = 0; i <= sets; i++){
            viento.setDireccionViento(((Math.random()*2)+1)*Math.PI); 
            viento.setTipoViento((int) (Math.random()*3)+1);
            contadorsets = i;
            for (int o = 0; o <= tiros; o++){
                if (primerjugador == 1){
                    jugadorhumano.lanzarFlecha(i,o,viento.getX2,viento.getY2);
                    viento.desviarFlecha(jugadorhumano.getTirox(),jugadorhumano.getTiroy());
                    juez.setX2Humanos(viento.getX2());
                    juez.setY2Humanos(viento.getY2());
                    juez.sumarPuntos();
                    jugadorIA.lanzarFlecha(i,o,viento.getX2,viento.getY2);
                    viento.desviarFlecha(jugadorIA.getTirox(),jugadorIA.getTiroy());
                    juez.setX2IA(viento.getX2());
                    juez.setY2IA(viento.getY2());
                    juez.sumarPuntosHumanos();
                    mensaje = juez.devolverInformacion()+"Set:"+toStringSet()+"Tiro:"+toStringTiro();
                    interfaz.displayMessage(mensaje);
                    contadortiros = o;

                
                }
            }
        }
        juez.decidirGanador();
    }

    public int getSet(){    
        return contadorsets;

    }

    public int getTiro(){
        return contadortiros;

    }

    public String toStringTiro(){
        String tiros = ""+contadortiros;
        return tiros;

    }

    public String toStringSet(){
        String sets = ""+contadorsets;
        return sets;

    }


    public int decidirEstrategia(){
        int strat = 0;
        strat = (int)(Math.random()*3);
        return strat;

    }

    public int decidirPrimerJugador(){
        int primerJugador = (int)(Math.random()*3);
        return primerJugador;
    }

}

